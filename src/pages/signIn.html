<div id="signin-container">
    <div class="login-box">
        <span class="close-btn" id="close-signin">&times;</span>
        <h2>Sign In</h2>
        <p>Please select your role and enter details</p>
        <!-- Role Selection Dropdown -->
        <form action="" id="login-form">
            <div class="input-group">
                <label class="signin-label" for="role">Sign in as</label>
                <select id="role" name="role" required>
                    <option value="">-- Select Role --</option>
                    <option value="user">User</option>
                    <option value="garageowner">GarageOwner</option>
                </select>
            </div>
            <!-- Email Input -->
            <div class="input-group">
                <label class="signin-label" for="email">Email Address</label>
                <input type="email" id="email" name="email" placeholder="Enter your email" required>
            </div>
            <!-- Password Input -->
            <div class="input-group">
                <label class="signin-label" for="password">Password</label>
                <input type="password" id="password" name="password" placeholder="Enter your password" required>
            </div>
            <!-- Remember Me & Forgot Password -->
            <div class="remember-forgot">
                <label class="signin-label"><input type="checkbox"> Remember me</label>
                <a href="#">Forgot password?</a>
            </div>
            <!-- Sign In Button -->
            <button type="submit">Sign In</button>
        </form>
        <!-- Sign Up Link -->
        <p class="signup-text">Don't have an account? <a href="./pages/signUp.html">Create one</a></p>

    </div>
</div>
<script>
    document.addEventListener("DOMContentLoaded", () => {

        console.log("yash")

        const loginUser = async () => {
            const form = document.getElementById('login-form');
            const formData = new FormData(form);
            const jsonData = Object.fromEntries(formData.entries());

            const response = await fetch("http://localhost:5001/api/users/login", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify(jsonData)

            });
            const data = await response.json();

            if (response.ok) {
                alert("login successfully")
                form.reset();
            }
        }
        document.getElementById("login-form").addEventListener("submit", (event) => {
            event.preventDefault();
            loginUser();
        });
    })
</script>